<h1 id="how-to-integrate-mcp-with-github-copilot-in-vs-code">How to
Integrate MCP with GitHub Copilot in VS Code</h1>
<h2 id="what-is-mcp">What is MCP?</h2>
<p><strong>The Model Context Protocol (MCP)</strong> is an <strong>open
standard developed by Anthropic</strong> to simplify and standardize how
large language models (LLMs) integrate with external tools, databases,
and APIs. Think of MCP as the <em>“USB-C port”</em> for AI models: just
as USB-C unified device connectivity, MCP aims to create a universal
interface for AI-to-tool interaction.</p>
<p>Originally built to enhance <strong>Claude’s</strong> ability to
interact with external systems, MCP was <strong>open-sourced in early
2024</strong> to promote industry-wide adoption. By making the protocol
public, Anthropic’s goal was to establish a shared infrastructure for
tool communication that minimizes the need for custom integrations while
boosting <strong>modularity</strong>, <strong>interoperability</strong>,
and <strong>developer productivity</strong> in AI applications.</p>
<p>Through MCP, language models can:</p>
<ul>
<li>Dynamically invoke APIs and fetch real-time data</li>
<li>Interact with databases and third-party tools using a consistent
format</li>
<li>Avoid hardcoded logic, making model behavior more flexible and
maintainable</li>
</ul>
<p>In short, <strong>MCP is reshaping how AI models plug into the real
world</strong>, shifting from isolated, monolithic systems to flexible,
tool-aware agents that can reason, retrieve, and act using standardized
methods.</p>
<h2 id="prerequisites">Prerequisites</h2>
<p>Before you begin, ensure you have the following:</p>
<ul>
<li><strong>Visual Studio Code (VS Code)</strong>: Updated to the latest
version.</li>
<li><strong>GitHub Account</strong>: With access to GitHub Copilot
(Free, Pro, Business, or Enterprise plan).</li>
<li><strong>GitHub Copilot Extensions</strong>: Both GitHub Copilot and
GitHub Copilot Chat extensions installed and enabled in VS Code.</li>
<li><strong>Node.js</strong>: Latest LTS version installed (check with
<code>node -v</code> in your terminal). Download from the <a
href="https://nodejs.org/">official Node.js website</a> if needed.</li>
<li><strong>Python</strong>: Installed for PIP packages (optional,
depending on the MCP server). Download from the <a
href="https://www.python.org/">official Python website</a> if
needed.</li>
<li><strong>Git</strong>: Installed for version control and repository
management.</li>
</ul>
<h2 id="step-1-setting-up-the-environment">Step 1: Setting Up the
Environment</h2>
<ol type="1">
<li><p><strong>Update VS Code</strong>:</p>
<ul>
<li>Open VS Code and check for updates via the Help &gt; Check for
Updates menu.</li>
<li>Ensure you’re running the latest stable or Insiders version to
support MCP integration.</li>
</ul></li>
<li><p><strong>Sign in to GitHub</strong>:</p>
<ul>
<li>In VS Code, go to the Accounts menu in the Activity Bar.</li>
<li>Select “Sign in with GitHub to use GitHub Copilot” and follow the
prompts to authenticate using your GitHub account. If you don’t have a
Copilot subscription, you’ll be signed up for the Copilot Free plan with
limited completions and chat interactions.<a
href="https://code.visualstudio.com/docs/copilot/setup"></a></li>
</ul></li>
<li><p><strong>Install Node.js and Python</strong>:</p>
<ul>
<li>Verify Node.js installation by running <code>node -v</code> in your
terminal. Install the latest LTS version if not present.</li>
<li>Verify Python installation by running <code>python --version</code>
or <code>python3 --version</code>. Install Python if needed for
PIP-based MCP servers.</li>
<li>MCP supports multiple languages and packages (e.g., TypeScript,
Docker, C#), but this guide focuses on Node.js for NPX packages and
Python for PIP packages.</li>
</ul></li>
<li><p><strong>Install GitHub Copilot Extensions</strong>:</p>
<ul>
<li>In VS Code, go to the Extensions view (<code>Ctrl+Shift+X</code> or
<code>Cmd+Shift+X</code> on macOS).</li>
<li>Search for “GitHub Copilot” and install both the <strong>GitHub
Copilot</strong> and <strong>GitHub Copilot Chat</strong>
extensions.</li>
<li>Restart VS Code after installation.</li>
</ul></li>
</ol>
<h2 id="step-2-configuring-mcp-in-vs-code">Step 2: Configuring MCP in VS
Code</h2>
<p>MCP servers enhance GitHub Copilot’s Agent Mode by providing tools
for tasks like repository management, file operations, or API calls.
Here’s how to configure an MCP server in VS Code:</p>
<ol type="1">
<li><p><strong>Choose an MCP Server</strong>:</p>
<ul>
<li>Visit the <a href="https://docs.anthropic.com/">MCP
documentation</a> or <a
href="https://github.com/modelcontextprotocol/servers">GitHub’s MCP
server repository</a> for a list of supported servers (e.g., GitHub MCP
server, Microsoft Playwright MCP server).</li>
<li>For this guide, we’ll use the <strong>GitHub MCP Server</strong> for
repository-related actions like creating issues or comparing files.</li>
</ul></li>
<li><p><strong>Install the MCP Server</strong>:</p>
<ul>
<li>Open a terminal in VS Code (<code>Ctrl+`` or</code>Cmd+`` on
macOS).</li>
<li>For the GitHub MCP server, follow the setup instructions from the
official repository (e.g.,
<code>npm install @github/copilot-language-server</code> for
Node.js-based servers).</li>
<li>Alternatively, use the VS Code interface:
<ul>
<li>Open the GitHub Copilot Chat view (<code>Ctrl+Alt+I</code> or
<code>Cmd+Alt+I</code>).</li>
<li>Select <strong>Agent Mode</strong> from the chat mode dropdown.</li>
<li>Click the “Install MCP Server” button if prompted (e.g., for Azure
MCP Server or GitHub MCP Server).</li>
</ul></li>
</ul></li>
<li><p><strong>Configure MCP in Workspace Settings</strong>:</p>
<ul>
<li><p>Create a <code>.vscode/mcp.json</code> file in your workspace
folder to define MCP server settings. Example:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;servers&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;GitHub MCP Server&quot;</span><span class="fu">,</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;transport&quot;</span><span class="fu">:</span> <span class="st">&quot;stdio&quot;</span><span class="fu">,</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="st">&quot;node&quot;</span><span class="ot">,</span> <span class="st">&quot;./node_modules/@github/copilot-language-server/dist/language-server.js&quot;</span><span class="ot">,</span> <span class="st">&quot;--stdio&quot;</span><span class="ot">,</span> <span class="st">&quot;true&quot;</span><span class="ot">]</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div></li>
<li><p>Alternatively, add MCP server settings to your user settings
(<code>Ctrl+,</code> or <code>Cmd+,</code> &gt; Search for “MCP”):</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;mcp.servers&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;GitHub MCP Server&quot;</span><span class="fu">,</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;transport&quot;</span><span class="fu">:</span> <span class="st">&quot;stdio&quot;</span><span class="fu">,</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="st">&quot;node&quot;</span><span class="ot">,</span> <span class="st">&quot;./node_modules/@github/copilot-language-server/dist/language-server.js&quot;</span><span class="ot">,</span> <span class="st">&quot;--stdio&quot;</span><span class="ot">,</span> <span class="st">&quot;true&quot;</span><span class="ot">]</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div></li>
<li><p>Ensure the <code>command</code> points to the correct path for
your MCP server executable.</p></li>
</ul></li>
<li><p><strong>Enable MCP Tools</strong>:</p>
<ul>
<li>In the Copilot Chat view, switch to <strong>Agent
Mode</strong>.</li>
<li>Click the <strong>Tools</strong> button and refresh the tools list.
The installed MCP server (e.g., “GitHub MCP Server”) should appear.
Toggle it on if needed.</li>
</ul></li>
</ol>
<h2 id="step-3-writing-and-testing-mcp-code">Step 3: Writing and Testing
MCP Code</h2>
<p>MCP enables Copilot to perform actions like creating GitHub issues or
comparing files. Here’s how to write and test MCP-related
interactions:</p>
<ol type="1">
<li><p><strong>Writing MCP Prompts</strong>:</p>
<ul>
<li>In the Copilot Chat view, ensure <strong>Agent Mode</strong> is
selected.</li>
<li>Use natural language prompts with context variables. Examples:
<ul>
<li><strong>Prompt</strong>: “Create a GitHub issue for adding a new
feature to my repository.”</li>
<li><strong>Prompt</strong>: “Compare my <code>ServerConfig.json</code>
with similar public GitHub repository configurations and suggest
improvements. #file:ServerConfig.json”</li>
</ul></li>
<li>Add context using the <strong>Add Context</strong> button or
variables like <code>#file</code> or <code>#codebase</code>.</li>
</ul></li>
<li><p><strong>Testing MCP Interactions</strong>:</p>
<ul>
<li>Enter the prompt in the Copilot Chat input field and press
Enter.</li>
<li>Copilot will invoke the MCP server’s tools (e.g., GitHub API for
creating issues) and display results in the Chat view.</li>
<li>Review the output (e.g., a new issue created in your repository or a
diff of file comparisons).</li>
<li>Accept changes by selecting <strong>Keep</strong> or
<strong>Accept</strong> in the Chat view, or reject them if they’re
incorrect.</li>
</ul></li>
<li><p><strong>Example Node.js Code for MCP Interaction</strong>:</p>
<ul>
<li><p>If developing a custom MCP server, use the MCP SDK. Below is a
basic Node.js example to create a tool for listing repository files:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> { MCPServer } <span class="op">=</span> <span class="pp">require</span>(<span class="st">&#39;@anthropic/mcp-sdk&#39;</span>)<span class="op">;</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> server <span class="op">=</span> <span class="kw">new</span> <span class="fu">MCPServer</span>({</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">transport</span><span class="op">:</span> <span class="st">&#39;stdio&#39;</span><span class="op">,</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">tools</span><span class="op">:</span> [</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>      <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;list_repository_files&#39;</span><span class="op">,</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>      <span class="dt">description</span><span class="op">:</span> <span class="st">&#39;Lists files in a GitHub repository&#39;</span><span class="op">,</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>      <span class="dt">execute</span><span class="op">:</span> <span class="kw">async</span> (params) <span class="kw">=&gt;</span> {</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> { repo } <span class="op">=</span> params<span class="op">;</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Simulated GitHub API call</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> [<span class="st">&#39;index.js&#39;</span><span class="op">,</span> <span class="st">&#39;package.json&#39;</span><span class="op">,</span> <span class="st">&#39;README.md&#39;</span>]<span class="op">;</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">,</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>server<span class="op">.</span><span class="fu">start</span>()<span class="op">;</span></span></code></pre></div></li>
<li><p>Save this as <code>mcp-server.js</code> and run it with
<code>node mcp-server.js</code>. Configure VS Code to use this server as
shown in Step 2.<a
href="https://code.visualstudio.com/docs/copilot/chat/mcp-servers"></a></p></li>
</ul></li>
<li><p><strong>Example Python Code for MCP Interaction</strong>:</p>
<ul>
<li><p>For Python-based MCP servers, use the Python MCP SDK:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> mcp_sdk <span class="im">import</span> MCPServer</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>server <span class="op">=</span> MCPServer(</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    transport<span class="op">=</span><span class="st">&quot;stdio&quot;</span>,</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    tools<span class="op">=</span>[</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>        {</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;name&quot;</span>: <span class="st">&quot;create_github_issue&quot;</span>,</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;description&quot;</span>: <span class="st">&quot;Creates a GitHub issue in a repository&quot;</span>,</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;execute&quot;</span>: <span class="kw">lambda</span> params: <span class="ss">f&quot;Issue created in </span><span class="sc">{</span>params[<span class="st">&#39;repo&#39;</span>]<span class="sc">}</span><span class="ss"> with title: </span><span class="sc">{</span>params[<span class="st">&#39;title&#39;</span>]<span class="sc">}</span><span class="ss">&quot;</span>,</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>server.start()</span></code></pre></div></li>
<li><p>Save as <code>mcp_server.py</code> and run with
<code>python mcp_server.py</code>. Update the
<code>.vscode/mcp.json</code> file to point to this script.</p></li>
</ul></li>
</ol>
<h2 id="step-4-advanced-features-and-customization">Step 4: Advanced
Features and Customization</h2>
<ol type="1">
<li><p><strong>Custom Instructions</strong>:</p>
<ul>
<li><p>Create a <code>.github/copilot-instructions.md</code> file to
provide project-specific context (e.g., coding standards, preferred
libraries). Example:</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu"># Copilot Instructions</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>This project is a web application built with Node.js and Express.</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Use camelCase for variable names.</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Prefer async/await over callbacks.</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Use the GitHub MCP server for repository actions.</span></code></pre></div></li>
<li><p>Copilot automatically applies these instructions in Agent
Mode.</p></li>
</ul></li>
<li><p><strong>Dynamic Tool Updates</strong>:</p>
<ul>
<li>MCP servers can dynamically update tools using list-changed events.
Modify your MCP server code to emit updates when new tools are
added.</li>
</ul></li>
<li><p><strong>Remote MCP Servers</strong>:</p>
<ul>
<li>Host MCP servers on platforms like Azure Container Apps for remote
access. Configure VS Code to connect via server-sent events (SSE)
instead of stdio.</li>
</ul></li>
<li><p><strong>Prompt Engineering</strong>:</p>
<ul>
<li>Use specific prompts for better results. Example: “Generate a
Node.js function to fetch data from an API using the GitHub MCP server.
#file:api.js”</li>
</ul></li>
</ol>
<h2 id="step-5-troubleshooting-and-best-practices">Step 5:
Troubleshooting and Best Practices</h2>
<ol type="1">
<li><p><strong>Troubleshooting</strong>:</p>
<ul>
<li><strong>MCP Server Not Detected</strong>: Check the
<code>.vscode/mcp.json</code> file for correct command paths. Run
<code>MCP: List Servers</code> from the Command Palette to verify.</li>
<li><strong>No Suggestions</strong>: Ensure Agent Mode is active and the
MCP server is toggled on in the Tools menu.</li>
<li><strong>Errors in Chat View</strong>: Select the error notification
and choose “Show Output” to view server logs.</li>
<li><strong>Authentication Issues</strong>: Re-authenticate your GitHub
account via the Accounts menu if Copilot fails to connect.</li>
</ul></li>
<li><p><strong>Best Practices</strong>:</p>
<ul>
<li><strong>Use Trusted MCP Servers</strong>: Only install servers from
verified sources to avoid security risks.</li>
<li><strong>Keep Prompts Specific</strong>: Break tasks into smaller,
clear prompts (e.g., “Generate a function” instead of “Build an
app”).</li>
<li><strong>Version Control Instructions</strong>: Store
<code>.github/copilot-instructions.md</code> in your repository to share
with your team.</li>
<li><strong>Test Changes</strong>: Always review and test Copilot’s
suggestions before accepting, as MCP actions may modify files or
repositories.</li>
</ul></li>
</ol>
<h2 id="conclusion">Conclusion</h2>
<p>Integrating the Model Context Protocol (MCP) with GitHub Copilot in
VS Code unlocks powerful AI-driven capabilities, enabling seamless
interaction with GitHub repositories, APIs, and external tools. By
following this guide, you’ve learned how to set up your environment,
configure MCP servers, write and test MCP interactions, and leverage
advanced features like custom instructions. With MCP’s standardized
interface, you can extend Copilot’s Agent Mode to suit your project’s
needs, boosting productivity and modularity.</p>
<p>For further exploration, check these resources:</p>
<ul>
<li><a href="https://docs.anthropic.com/">MCP Documentation</a></li>
<li><a href="https://docs.github.com/en/copilot">GitHub Copilot
Documentation</a></li>
<li><a href="https://code.visualstudio.com/docs/copilot/mcp-servers">VS
Code MCP Guide</a></li>
<li>GitHub’s <a
href="https://github.com/awesome-mcp-zh">Awesome-MCP-ZH</a> for
Chinese-language MCP resources</li>
</ul>
<p>Experiment with different MCP servers and prompts to tailor Copilot
to your workflow, and share your feedback with the community to help
shape the future of AI-driven development!</p>
